
import React, { useState, useEffect, useRef } from 'react';
import { 
  Box, 
  Scan, 
  Printer, 
  MapPin, 
  Search, 
  ArrowRight, 
  Menu, 
  X,
  Clock,
  Zap,
  Cpu,
  Activity,
  Terminal,
  Sun,
  Moon,
  Layers,
  Send,
  User,
  LogOut,
  MessageCircle,
  ShieldCheck,
  CheckCircle2,
  ChevronRight,
  BellRing,
  Calculator
} from 'lucide-react';

// --- –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø (–í–°–ï –î–ê–ù–ù–´–ï –°–û–•–†–ê–ù–ï–ù–´) ---
const TELEGRAM_BOT_TOKEN = "8453938307:AAGcU3fQdoPZC7I5y5ueFFnK3HZLAfg680Q";
const ADMIN_CHAT_ID = "334485676";
const BOT_USERNAME = "d1f0_bot";
const YANDEX_METRIKA_ID = 106603823;

// --- –î–ê–ù–ù–´–ï –£–°–õ–£–ì (–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–∞–∫ –Ω–∞ —Ä–µ—Ñ–µ—Ä–µ–Ω—Å–µ) ---
const SERVICES_DATA = [
  {
    id: "fdm",
    title: "FDM –ü–ï–ß–ê–¢–¨",
    subTitle: "Industrial Filament Printing",
    desc: "–ü—Ä–æ–º—ã—à–ª–µ–Ω–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ –∏–∑ —Ç–µ—Ä–º–æ–ø–ª–∞—Å—Ç–∏–∫–æ–≤. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã—Ö –ø—Ä–æ—Ç–æ—Ç–∏–ø–æ–≤, –æ—Å–Ω–∞—Å—Ç–∫–∏, –∫–æ—Ä–ø—É—Å–æ–≤ –∏ –∫–æ–Ω–µ—á–Ω—ã—Ö –¥–µ—Ç–∞–ª–µ–π.",
    img: "https://images.unsplash.com/photo-1631541909061-71e349d1f203?q=80&w=1200&auto=format&fit=crop",
    icon: <Printer size={28} />,
    specs: ["–¢–æ—á–Ω–æ—Å—Ç—å: ¬±0.1–º–º", "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: ABS, PETG, TPU, Nylon", "–û–±–ª–∞—Å—Ç—å: –¥–æ 400—Ö400–º–º"],
    accent: "cyan"
  },
  {
    id: "sla",
    title: "SLA / LCD –ü–ï–ß–ê–¢–¨",
    subTitle: "High-Resolution Resin",
    desc: "–ü–µ—á–∞—Ç—å —Ñ–æ—Ç–æ–ø–æ–ª–∏–º–µ—Ä–Ω—ã–º–∏ —Å–º–æ–ª–∞–º–∏ —Å –º–∏–∫—Ä–æ–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é. –ì–ª–∞–¥–∫–∞—è –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç—å –∏ –≤—ã—Å–æ–∫–∞—è –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –º–∞—Å—Ç–µ—Ä-–º–æ–¥–µ–ª–µ–π.",
    img: "https://images.unsplash.com/photo-1612815154858-60aa4c59eaa6?q=80&w=1200&auto=format&fit=crop",
    icon: <Box size={28} />,
    specs: ["–°–ª–æ–π: –æ—Ç 25 –º–∏–∫—Ä–æ–Ω", "–ú–∞—Ç–µ—Ä–∏–∞–ª—ã: Standard, Tough, Castable", "–î–ª—è: –Æ–≤–µ–ª–∏—Ä–æ–≤, –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏–∏"],
    accent: "purple"
  },
  {
    id: "scan",
    title: "3D –°–ö–ê–ù–ò–†–û–í–ê–ù–ò–ï",
    subTitle: "Laser Metrology Grade",
    desc: "–°–æ–∑–¥–∞–Ω–∏–µ —Ü–∏—Ñ—Ä–æ–≤—ã—Ö –¥–≤–æ–π–Ω–∏–∫–æ–≤ —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤. –í—ã—Å–æ–∫–æ—Ç–æ—á–Ω—ã–π —Ä–µ–≤–µ—Ä—Å-–∏–Ω–∂–∏–Ω–∏—Ä–∏–Ω–≥ –∏ –∫–æ–Ω—Ç—Ä–æ–ª—å –∫–∞—á–µ—Å—Ç–≤–∞ –≥–µ–æ–º–µ—Ç—Ä–∏–∏.",
    img: "https://images.unsplash.com/photo-1581092162384-8987c1d64718?q=80&w=1200&auto=format&fit=crop",
    icon: <Scan size={28} />,
    specs: ["–¢–æ—á–Ω–æ—Å—Ç—å: –¥–æ 0.04–º–º", "–§–æ—Ä–º–∞—Ç: STL, OBJ, STEP", "–í—ã–µ–∑–¥–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ"],
    accent: "yellow"
  }
];

const PORTFOLIO = [
  { id: 1, title: "–¢—É—Ä–±–∏–Ω–∞ –î–í–°", cat: "Engineering", img: "https://images.unsplash.com/photo-1537462715879-360eeb61a0ad?q=80&w=800&auto=format&fit=crop" },
  { id: 2, title: "–ü—Ä–æ—Ç–µ–∑ –∫–∏—Å—Ç–∏", cat: "Medical", img: "https://images.unsplash.com/photo-1589254065878-42c9da997008?q=80&w=800&auto=format&fit=crop" },
  { id: 3, title: "–ê—Ä—Ç-–æ–±—ä–µ–∫—Ç", cat: "Art", img: "https://images.unsplash.com/photo-1549490349-8643362247b5?q=80&w=800&auto=format&fit=crop" },
  { id: 4, title: "–ö–æ—Ä–ø—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞", cat: "Electronic", img: "https://images.unsplash.com/photo-1517420704952-d9f39e95b43e?q=80&w=800&auto=format&fit=crop" }
];

// --- –í–°–ü–û–ú–û–ì–ê–¢–ï–õ–¨–ù–´–ï –ö–û–ú–ü–û–ù–ï–ù–¢–´ ---

const SmartImage = ({ src, alt, className }) => {
  const [loaded, setLoaded] = useState(false);
  return (
    <div className={`relative overflow-hidden bg-slate-800 ${className}`}>
      {!loaded && <div className="absolute inset-0 animate-pulse bg-slate-700" />}
      <img 
        src={src} 
        alt={alt} 
        className={`w-full h-full object-cover transition-all duration-1000 ${loaded ? 'scale-100 opacity-100' : 'scale-110 opacity-0'}`}
        onLoad={() => setLoaded(true)}
      />
    </div>
  );
};

const TelegramLogin = ({ theme, onLogin }) => {
  const containerRef = useRef(null);
  useEffect(() => {
    if (!containerRef.current) return;
    containerRef.current.innerHTML = "";
    const script = document.createElement("script");
    script.src = "https://telegram.org/js/telegram-widget.js?22";
    script.setAttribute("data-telegram-login", BOT_USERNAME);
    script.setAttribute("data-size", "medium");
    script.setAttribute("data-radius", "8");
    script.setAttribute("data-onauth", "onTelegramAuth(user)");
    script.async = true;
    window.onTelegramAuth = (user) => onLogin(user);
    containerRef.current.appendChild(script);
    return () => { delete window.onTelegramAuth; };
  }, [onLogin]);

  return (
    <div className="flex flex-col items-center gap-2">
      <div ref={containerRef} />
      <div className="hidden md:flex items-center gap-2 px-2 py-0.5 bg-blue-500/10 border border-blue-500/30 rounded text-[9px] text-blue-400 font-bold uppercase tracking-widest animate-pulse">
        –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ –≤—Ö–æ–¥ –≤ Telegram
      </div>
    </div>
  );
};

export default function App() {
  const [theme, setTheme] = useState('cyberpunk'); 
  const [isModalOpen, setIsModalOpen] = useState(false);
  const [user, setUser] = useState(null);
  const [scrolled, setScrolled] = useState(false);

  const isCyber = theme === 'cyberpunk';

  useEffect(() => {
    const handleScroll = () => setScrolled(window.scrollY > 50);
    window.addEventListener('scroll', handleScroll);
    
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫–∏
    if (!window.ym) {
        (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
        m[i].l=1*new Date();
        for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
        k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)
        })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

        window.ym(YANDEX_METRIKA_ID, "init", {
             clickmap:true,
             trackLinks:true,
             accurateTrackBounce:true,
             webvisor:true,
             ecommerce:"dataLayer"
        });
    }

    return () => window.removeEventListener('scroll', handleScroll);
  }, []);

  const sendTelegramMessage = async (text) => {
    try {
      await fetch(`https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ chat_id: ADMIN_CHAT_ID, text: text, parse_mode: 'HTML' })
      });
    } catch (e) { console.error(e); }
  };

  const handleLogin = (tgUser) => {
    setUser(tgUser);
    sendTelegramMessage(`üîê <b>–í—Ö–æ–¥:</b> ${tgUser.first_name} (@${tgUser.username || 'null'})`);
  };

  const handleOrder = async (e) => {
    e.preventDefault();
    const f = new FormData(e.target);
    const msg = `üöÄ <b>–ù–æ–≤—ã–π –∑–∞–∫–∞–∑!</b>\n\n<b>–û–±—ä–µ–∫—Ç:</b> ${f.get('title')}\n<b>–¢–∏–ø:</b> ${f.get('type')}\n<b>–ö–æ–Ω—Ç–∞–∫—Ç:</b> ${f.get('contact')}\n<b>–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:</b> ${user ? '@'+user.username : '–ì–æ—Å—Ç—å'}`;
    await sendTelegramMessage(msg);
    alert("–ó–∞—è–≤–∫–∞ –ø—Ä–∏–Ω—è—Ç–∞! –ú—ã —Å–≤—è–∂–µ–º—Å—è —Å –≤–∞–º–∏ –≤ Telegram.");
    setIsModalOpen(false);
    if (window.ym) window.ym(YANDEX_METRIKA_ID, 'reachGoal', 'order_submitted');
  };

  return (
    <div className={`min-h-screen transition-colors duration-500 ${isCyber ? 'bg-black text-white' : 'bg-slate-50 text-slate-900'}`}>
      
      {/* Background Grids */}
      {isCyber && (
        <div className="fixed inset-0 z-0 opacity-20 pointer-events-none" 
             style={{ backgroundImage: 'radial-gradient(#00f3ff 0.5px, transparent 0.5px)', backgroundSize: '30px 30px' }} />
      )}

      {/* Navigation */}
      <nav className={`fixed top-0 w-full z-50 transition-all duration-300 ${scrolled ? (isCyber ? 'bg-black/90 border-b border-cyan-500/30' : 'bg-white/90 shadow-lg') : 'bg-transparent'} backdrop-blur-md`}>
        <div className="max-w-7xl mx-auto px-6 h-20 flex justify-between items-center">
          <div className="flex items-center gap-4 cursor-pointer group" onClick={() => window.scrollTo({top: 0, behavior: 'smooth'})}>
            <div className={`w-10 h-10 flex items-center justify-center transition-all ${isCyber ? 'border border-cyan-500 text-cyan-400 shadow-[0_0_15px_#00f3ff]' : 'bg-indigo-600 rounded-lg text-white'}`}>
              <Zap size={20} />
            </div>
            <div className="flex flex-col">
              <span className={`font-display font-bold text-xl tracking-tighter uppercase ${isCyber ? 'text-white' : 'text-slate-900'}`}>3D_CHUVASHIA</span>
              <span className="text-[10px] font-mono opacity-50 uppercase tracking-widest">Additive Studio</span>
            </div>
          </div>

          <div className="hidden lg:flex items-center gap-10 font-display font-bold text-xs uppercase tracking-widest">
            <a href="#services" className="hover:text-cyan-400 transition-colors">–£—Å–ª—É–≥–∏</a>
            <a href="#portfolio" className="hover:text-cyan-400 transition-colors">–†–∞–±–æ—Ç—ã</a>
            <a href="#contacts" className="hover:text-cyan-400 transition-colors">–ö–æ–Ω—Ç–∞–∫—Ç—ã</a>
          </div>

          <div className="flex items-center gap-6">
            <button onClick={() => setTheme(isCyber ? 'modern' : 'cyberpunk')} className={`p-2 rounded-full border transition-all ${isCyber ? 'border-yellow-400 text-yellow-400' : 'border-slate-200 text-slate-600'}`}>
              {isCyber ? <Sun size={18} /> : <Moon size={18} />}
            </button>
            {user ? (
              <div className="flex items-center gap-3 bg-white/5 p-1 pr-3 border border-white/10 rounded-full">
                <img src={user.photo_url || `https://ui-avatars.com/api/?name=${user.first_name}`} className="w-8 h-8 rounded-full" alt="avatar" />
                <span className="text-xs font-bold hidden sm:inline">{user.first_name}</span>
                <button onClick={() => setUser(null)}><LogOut size={14} className="text-red-500" /></button>
              </div>
            ) : <TelegramLogin onLogin={handleLogin} />}
            <button onClick={() => setIsModalOpen(true)} className={`px-6 py-2.5 font-display font-bold text-xs uppercase tracking-widest transition-all ${isCyber ? 'bg-cyan-500 text-black hover:shadow-[0_0_25px_#00f3ff]' : 'bg-slate-900 text-white hover:bg-indigo-600'}`}>
              –ó–∞–∫–∞–∑–∞—Ç—å
            </button>
          </div>
        </div>
      </nav>

      {/* Hero Section */}
      <header className="relative h-screen flex items-center justify-center px-6 overflow-hidden">
        <div className="max-w-6xl mx-auto text-center z-10">
          <div className={`inline-flex items-center gap-2 mb-8 px-4 py-1 rounded-full border text-[10px] font-bold uppercase tracking-[0.3em] animate-bounce ${isCyber ? 'border-cyan-500/50 bg-cyan-950/20 text-cyan-400' : 'border-indigo-100 bg-indigo-50 text-indigo-600'}`}>
            <ShieldCheck size={12} /> –°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ —Ä–∞–±–æ—Ç–µ
          </div>
          <h1 className={`font-display text-6xl md:text-[140px] font-black leading-none mb-10 tracking-tighter ${isCyber ? 'text-white italic' : 'text-slate-900'}`}>
            DIGITAL<br/>
            <span className={`text-transparent bg-clip-text bg-gradient-to-r ${isCyber ? 'from-cyan-400 to-purple-500' : 'from-indigo-600 to-violet-600'}`}>CRAFT_21</span>
          </h1>
          <p className="max-w-2xl mx-auto text-lg md:text-xl opacity-60 mb-12 font-medium leading-relaxed">
            –ü–µ—Ä–µ–¥–æ–≤—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ –∞–¥–¥–∏—Ç–∏–≤–Ω–æ–≥–æ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞ –≤ —Å–µ—Ä–¥—Ü–µ –ß—É–≤–∞—à–∏–∏. –ú—ã –ø—Ä–µ–≤—Ä–∞—â–∞–µ–º —Ç–µ—Ä–∞–±–∞–π—Ç—ã –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–∏–∑–∏—á–µ—Å–∫—É—é —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—å.
          </p>
          <div className="flex flex-col sm:flex-row justify-center gap-6">
            <button onClick={() => setIsModalOpen(true)} className={`px-12 py-5 font-display font-bold uppercase tracking-widest flex items-center justify-center gap-3 transition-all ${isCyber ? 'bg-white text-black hover:bg-cyan-400' : 'bg-slate-900 text-white hover:bg-indigo-600'}`}>
              –ù–∞—á–∞—Ç—å –ø—Ä–æ–µ–∫—Ç <ChevronRight size={20} />
            </button>
            <a href="#services" className={`px-12 py-5 border font-display font-bold uppercase tracking-widest transition-all ${isCyber ? 'border-white/20 hover:bg-white/5 text-white' : 'border-slate-200 hover:bg-white text-slate-900 shadow-sm'}`}>
              –£—Å–ª—É–≥–∏
            </a>
          </div>
        </div>
        
        {/* Background Visual */}
        <div className="absolute inset-0 z-0">
          <div className={`absolute inset-0 bg-gradient-to-b ${isCyber ? 'from-black via-transparent to-black' : 'from-slate-50 via-transparent to-slate-50'} z-10`} />
          <SmartImage src="https://images.unsplash.com/photo-1635070041078-e363dbe005cb?q=80&w=1600" className="w-full h-full opacity-30 grayscale" alt="hero-bg" />
        </div>
      </header>

      {/* Services Grid (Improved Layout) */}
      <section id="services" className={`py-32 px-6 relative z-10 border-t ${isCyber ? 'border-white/5' : 'border-slate-200'}`}>
        <div className="max-w-7xl mx-auto">
          <div className="mb-24 flex flex-col md:flex-row justify-between items-end gap-6 border-b pb-12 border-current opacity-20">
            <h2 className="font-display text-5xl md:text-8xl font-black uppercase tracking-tighter">–ù–∞—à–∏ <br/> –°–µ—Ä–≤–∏—Å—ã</h2>
            <div className="font-mono text-xs text-right tracking-[0.5em]">// TECHNOLOGICAL_CAPABILITIES</div>
          </div>

          <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            {SERVICES_DATA.map((service) => (
              <div key={service.id} className={`group flex flex-col h-full border transition-all duration-500 overflow-hidden ${isCyber ? 'bg-slate-900/40 border-white/5 hover:border-cyan-500/50' : 'bg-white border-slate-100 shadow-sm hover:shadow-xl hover:border-indigo-200'}`}>
                <div className="h-[280px] relative overflow-hidden">
                  <SmartImage src={service.img} className="w-full h-full group-hover:scale-110 transition-transform duration-1000" alt={service.title} />
                  <div className={`absolute top-6 right-6 w-14 h-14 flex items-center justify-center backdrop-blur-xl border ${isCyber ? 'bg-black/60 border-cyan-500/30 text-cyan-400' : 'bg-white/80 border-slate-100 text-indigo-600'}`}>
                    {service.icon}
                  </div>
                </div>
                <div className="p-10 flex flex-col flex-grow">
                  <div className="mb-6">
                    <span className="text-[10px] font-mono font-bold text-cyan-500 uppercase tracking-widest">{service.subTitle}</span>
                    <h3 className="font-display text-3xl font-black mt-2 uppercase tracking-tighter">{service.title}</h3>
                  </div>
                  <p className="opacity-60 text-sm leading-relaxed mb-8">{service.desc}</p>
                  <ul className="mt-auto space-y-3">
                    {service.specs.map((spec, i) => (
                      <li key={i} className="flex items-center gap-3 text-[11px] font-bold opacity-40 uppercase tracking-tight">
                        <CheckCircle2 size={14} className="text-cyan-500 shrink-0" /> {spec}
                      </li>
                    ))}
                  </ul>
                  <button onClick={() => setIsModalOpen(true)} className={`mt-10 py-4 border font-display font-bold text-[10px] uppercase tracking-[0.3em] transition-all ${isCyber ? 'border-cyan-500/30 text-cyan-400 hover:bg-cyan-500 hover:text-black' : 'border-slate-200 hover:bg-slate-900 hover:text-white'}`}>
                    –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
                  </button>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Portfolio Showcase */}
      <section id="portfolio" className={`py-32 px-6 ${isCyber ? 'bg-slate-950/50' : 'bg-white border-y border-slate-100'}`}>
        <div className="max-w-7xl mx-auto">
          <h2 className="font-display text-5xl md:text-7xl font-black mb-20 uppercase tracking-tighter text-center italic">Showcase</h2>
          <div className="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
            {PORTFOLIO.map(p => (
              <div key={p.id} className="aspect-square relative group overflow-hidden cursor-crosshair border border-white/5">
                <SmartImage src={p.img} alt={p.title} className="w-full h-full grayscale group-hover:grayscale-0 group-hover:scale-110 transition-all duration-1000" />
                <div className="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity p-8 flex flex-col justify-end">
                  <span className="text-[9px] font-mono text-cyan-400 mb-2 uppercase">{p.cat}</span>
                  <h4 className="text-xl font-black uppercase text-white">{p.title}</h4>
                </div>
              </div>
            ))}
          </div>
        </div>
      </section>

      {/* Contacts / Map */}
      <section id="contacts" className="relative h-[700px] border-t border-white/10">
        <iframe 
          src="https://yandex.ru/map-widget/v1/?ll=47.251916%2C56.119047&z=14" 
          className={`w-full h-full map-style opacity-50 ${isCyber ? 'invert brightness-50' : ''}`} 
          frameBorder="0"
        />
        <div className="absolute inset-0 pointer-events-none flex items-center justify-center p-6">
          <div className={`pointer-events-auto p-12 max-w-sm w-full font-mono text-center shadow-2xl backdrop-blur-2xl border ${isCyber ? 'bg-black/90 border-cyan-500/30' : 'bg-white border-slate-200'}`}>
            <MapPin className="text-cyan-500 mx-auto mb-6" size={40} />
            <h3 className="text-2xl font-bold mb-6 uppercase tracking-widest">–õ–û–ö–ê–¶–ò–Ø_21</h3>
            <div className="space-y-4 text-xs opacity-60 mb-10 leading-relaxed uppercase">
              –ß–µ–±–æ–∫—Å–∞—Ä—ã, –ø—Ä–æ—Å–ø–µ–∫—Ç –õ–µ–Ω–∏–Ω–∞ 12<br/>
              –ó–∞–∫–∞–∑—ã –ø—Ä–∏–Ω–∏–º–∞—é—Ç—Å—è 24/7 –æ–Ω–ª–∞–π–Ω<br/>
              TG: @3d_chuvashia
            </div>
            <button onClick={() => setIsModalOpen(true)} className={`w-full py-4 font-bold uppercase tracking-widest transition-colors ${isCyber ? 'bg-cyan-500 text-black' : 'bg-slate-900 text-white'}`}>–°–≤—è–∑–∞—Ç—å—Å—è</button>
          </div>
        </div>
      </section>

      {/* Footer */}
      <footer className="py-20 px-6 border-t border-white/5 text-center font-mono">
        <div className="max-w-7xl mx-auto opacity-30 text-[10px] uppercase tracking-[0.5em] space-y-4">
          <div>¬© 2026 3D_CHUVASHIA // CORE_SYSTEM_VER_10.0</div>
          <div className="flex justify-center gap-6">
            <a href="#" className="hover:text-cyan-400">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a>
            <a href="#" className="hover:text-cyan-400">–ü—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–∏—Å–∞</a>
          </div>
        </div>
      </footer>

      {/* Modal Form */}
      {isModalOpen && (
        <div className="fixed inset-0 z-[100] flex items-center justify-center p-6 bg-black/95 backdrop-blur-3xl">
          <div className={`w-full max-w-lg relative p-1 bg-gradient-to-br from-cyan-500 to-purple-600 ${isCyber ? '' : 'rounded-2xl'}`}>
            <div className={`p-10 ${isCyber ? 'bg-black' : 'bg-white rounded-2xl'}`}>
              <button onClick={() => setIsModalOpen(false)} className="absolute top-8 right-8 opacity-50 hover:opacity-100 transition-opacity"><X size={24}/></button>
              <h2 className="font-display text-3xl font-black mb-2 uppercase italic tracking-tighter">–ù–æ–≤—ã–π –ü—Ä–æ—Ç–æ–∫–æ–ª</h2>
              <p className="font-mono text-[9px] opacity-50 mb-10 uppercase tracking-widest">Initialising direct production link...</p>
              <form onSubmit={handleOrder} className="space-y-6 font-mono">
                <input required name="title" className={`w-full p-4 border outline-none text-xs transition-all ${isCyber ? 'bg-white/5 border-white/10 focus:border-cyan-500' : 'bg-slate-50 border-slate-200 focus:ring-2 focus:ring-indigo-600'}`} placeholder="–ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–≥–æ—Ç–æ–≤–∏—Ç—å?" />
                <div className="grid grid-cols-2 gap-4">
                  <select name="type" className={`p-4 border text-xs outline-none ${isCyber ? 'bg-white/5 border-white/10' : 'bg-slate-50 border-slate-200'}`}>
                    <option>FDM –ü–õ–ê–°–¢–ò–ö</option>
                    <option>SLA –°–ú–û–õ–ê</option>
                    <option>3D –°–ö–ê–ù</option>
                  </select>
                  <input name="price" className={`p-4 border outline-none text-xs ${isCyber ? 'bg-white/5 border-white/10' : 'bg-slate-50 border-slate-200'}`} placeholder="–ë—é–¥–∂–µ—Ç ‚ÇΩ" />
                </div>
                <input required name="contact" className={`w-full p-4 border outline-none text-xs ${isCyber ? 'bg-white/5 border-white/10 focus:border-cyan-500' : 'bg-slate-50 border-slate-200 focus:ring-2 focus:ring-indigo-600'}`} placeholder="@tg –∏–ª–∏ –¢–µ–ª–µ—Ñ–æ–Ω" />
                <label className="flex items-start gap-3 cursor-pointer group">
                  <input type="checkbox" required className="mt-1" />
                  <span className="text-[9px] opacity-40 group-hover:opacity-100 transition-opacity uppercase">–Ø –ø—Ä–∏–Ω–∏–º–∞—é —É—Å–ª–æ–≤–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ–ª–∏—Ç–∏–∫—É –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</span>
                </label>
                <button className={`w-full py-5 font-display font-bold uppercase tracking-widest transition-all ${isCyber ? 'bg-cyan-500 text-black' : 'bg-slate-900 text-white'}`}>–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å</button>
              </form>
            </div>
          </div>
        </div>
      )}
    </div>
  );
}
